<!DOCTYPE html>
<html>
<head>
  <title>Virtual Classroom</title>

  <!-- A-FRAME VR LIBRARY -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    body { margin: 0; }
    #exitBtn {
      position: fixed;
      top: 15px;
      right: 15px;
      padding: 10px 20px;
      background: red;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      z-index: 999;
    }
  </style>
</head>

<body>

<button id="exitBtn">Exit VR</button>

<a-scene>

  <!-- Camera (Student View) -->
  <a-entity position="0 1.6 4">
    <a-camera></a-camera>
  </a-entity>

  <!-- Classroom Floor -->
  <a-plane rotation="-90 0 0" width="20" height="20" color="#ECECEC"></a-plane>

  <!-- Walls -->
  <a-box position="0 2 -10" width="20" height="4" depth="0.5" color="#2c3e50"></a-box>
  <a-box position="-10 2 0" width="0.5" height="4" depth="20" color="#34495e"></a-box>
  <a-box position="10 2 0" width="0.5" height="4" depth="20" color="#34495e"></a-box>

  <!-- Teacher -->
  <a-sphere position="0 1.6 -5" radius="0.5" color="orange"></a-sphere>
  <a-text value="Teacher" position="-0.7 2.4 -5" color="white"></a-text>

  <!-- Whiteboard -->
  <a-plane position="0 2 -9.8" width="6" height="3" color="white"></a-plane>
  <a-text value="Welcome to VR Class" position="-2.5 2.8 -9.7" color="black"></a-text>

  <!-- Student Seats -->
  <a-box position="-2 0.5 1" width="1" height="1" depth="1" color="#3498db"></a-box>
  <a-box position="0 0.5 1" width="1" height="1" depth="1" color="#3498db"></a-box>
  <a-box position="2 0.5 1" width="1" height="1" depth="1" color="#3498db"></a-box>

</a-scene>

<script>
  // Exit VR
  document.getElementById("exitBtn").onclick = () => {
    window.location.href = "dashboard.html";
  };

  // Auto Attendance
  fetch("http://localhost:5000/api/attendance/mark", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      username: localStorage.getItem("username"),
      status: "present"
    })
  });
</script>

</body>
</html>
